## Part 1. Установка ОС

- Был установлен Ubuntu 20.04 Server LTS без графического интерфейса. Для виртуализации использовалась программа VirtualBox.
- Выведем версию Ubuntu с помощью команды *cat /etc/passwd*.

![Вывод команды cat /etc/passwd](img/img1.jpeg)

## Part 2. Создание пользователя

- С помощью команды *sudo useradd -G adm admin* создаем пользователя, отличного от созданного при установке, где *-G adm* - добавление в группу *adm*.

![Вывод команды для создания пользователя](img/img3.jpeg)

- Убедимся, что новый пользователь есть в выводе команды *cat /etc/passwd*.

![Вывод команды cat /etc/passwd](img/img2.jpeg)

## Part 3. Настройка сети ОС

- Задаем название машины user-1.

![Команда для смены названия машины](img/img4.jpeg)

- Установим временную зону, соответствующую моему местоположению (*Asia/Yekaterinburg*).

![Установка временной зоны](img/img5.jpeg)

- Выведем названия сетевых интерфейсов с помощью команды *ip link show*. 

![Вывод названий сетевых интерфейсов](img/img6.jpeg)

> **Интерфейс lo** - виртуальный интерфейс обратной петли, который позволяет компьютеру обращаться к самому себе.

- Получим ip-адрес устройства от DHCP-сервера с помощью команды *ip addr show enp0s3*.

![Получение ip-адреса устройства от DHCP-сервера](img/img7.jpeg)

> **DHCP** - Dynamic Host Configuration Protocol. Это протокол, позволяющий автоматически присваивать ip-адреса устройствам в сети.

- Определим и выведем на экран внешний ip-адрес шлюза (ip) и внутренний IP-адрес шлюза, он же ip-адрес по умолчанию (gw).
    1. Внутренний адрес определяем с помощью команды *ip r* (*ip route show*) 

    ![Внутренний ip-адрес шлюза](img/img8.jpeg)

    2. Внешний адрес определяем с помощью команды *curl ifconfig.me*

    ![Внешний ip-адрес шлюза](img/img9.jpeg)

- Зададим статичные настройки *ip*, *gw*, *dns*. 
    1. Поменяем соответствующие поля в *10-static.yaml*.

    ![Изменение файла конфигурации](img/img10.jpeg)

    2. Применим настройки командой *sudo netplan apply*.

- Перезагрузимся и убедимся, что статичные сетевые настройки соответствуют заданным в предыдущем пункте.
    1. Перезагружаемся с помощью команды *sudo reboot*.
    2. Смотрим сетевые настройки с помощью команды *ip addr show enp0s3* и видим, что они соответствуют ожидаемым.

    ![Проверка сетевых настроек после перезагрузки](img/img11.jpeg)

- Пропингуем удаленные хосты 1.1.1.1 и ya.ru.
    1. Пингуем 1.1.1.1 с помощью команды *ping 1.1.1.1*.

    ![Результат пинга 1.1.1.1](img/img12.jpeg)
    
    2. Пингуем ya.ru с помощью команды *ping ya.ru*.

    ![Результат пинга ya.ru](img/img13.jpeg)

## Part 4. Обновление ОС

- Обновим системные пакеты до последней версии.
    1. Обновим список доступных пакетов командой *sudo apt update*.
    2. Установим обновления командой *sudo apt upgrade*.
    3. Убедимся, что получены последние списки пакетов.

    ![Проверка пакетов](img/img14.jpeg)

    4. Убедимся, что все доступные пакеты установлены.

    ![Пакеты установлены](img/img15.jpeg)

## Part 5. Использование команды sudo

> **sudo** - утилита, позволяющая пользователю запускать программы с привилегиями другой учетной записи

- Используя sudo, изменим hostname ОС от имени admin. Для этого применим команду *sudo -u admin hostnamectl set-hostname new-hostname*.

![Изменение hostname](img/img16.jpeg)

- Проверим, что *hostname* изменился.

![Проверка hostname](img/img17.jpeg)

## Part 6. Установка и настройка службы времени

- Выведем время моего часового пояса(*Asia/Yekaterinburg*) с помощью команды *timedatectl show*.

![Текущее время](img/img18.jpeg)

## Part 7. Установка и использование текстовых редакторов

> Для выполнения задания будем использовать следующие текстовые редакторы: *Vim*, *Nano*, *Joe*.

- Используя каждый из редакторов напишем свой никнейм и закроем файлы с сохранением.

    1. Создадим файл test_vim.txt. Напишем никнейм и закроем файл с сохранением изменений c помощью *:wq*.

    ![Содержимое файла test_vim.txt перед выходом](img/img19.jpeg)

    2. Создадим файл test_nano.txt. Напишем никнейм и закроем файл с сохранением изменений с помощью *Ctrl+X Y*.

    ![Содержимое файла test_nano.txt перед выходом](img/img20.jpeg)

    3. Создадим файл test_joe.txt. Напишем никнейм и закроем файл с сохранением изменений с помощью *Ctrl+K Ctrl+X*.

    ![Содержимое файла test_joe.txt перед выходом](img/img21.jpeg)

- Используя каждый из редакторов отредактируем файлы и закроем их без изменений.

    1. Отредактируем файл test_vim.txt, заменив никнейм на *21 School 21*. Выйдем без сохранения с помощью *:q!*.

    ![Содержимое файла после редактирования](img/img22.jpeg)

    2. Отредактируем файл test_nano.txt, заменив никнейм на *21 School 21*. Выйдем без сохранения с помощью *Ctrl+X N*.

    ![Содержимое файла после редактирования](img/img23.jpeg)

    3. Отредактируем файл test_joe.txt, заменив никнейм на *21 School 21*. Выйдем без сохранения с помощью *Ctrl+KQ n*.

    ![Содержимое файла после редактирования](img/img24.jpeg)

- Используя каждый из редакторов освоим функции поиска.

    1. Отредактируем файл test_vim.txt. Для поиска слова используем *?*.

    ![Поиск слова School в Vim](img/img25.jpeg)

    2. Отредактируем файл test_nano.txt. Для поиска слова используем *Ctrl+W*.

    ![Поиск слова School в Nano](img/img26.jpeg)

    3. Отредактируем файл test_joe.txt. Для поиска слова используем *Ctrl+W*.

    ![Поиск слова School в Joe](img/img27.jpeg)

- Используя каждый из редакторов освоим функции замены.

    1. Для замены в Vim используем *:s*.

    ![Замена слова School в Vim](img/img28.jpeg)

    2. Для замены в Nano используем *Ctrl+/*.

    ![Замена слова School в Nano](img/img29.jpeg)

    3. Для замены в Joe используем *Ctrl+KF R*.

    ![Рис. 1. Замена слова School в Joe](img/img30.jpeg)

    ![Рис. 2. Замена слова School в Joe ](img/img31.jpeg)

## Part 8. Установка и базовая настройка сервиса SSHD

- Установим службу SSHd с помощью команды *sudo apt install openssh-server*.

- Добавим автостарт службы при запуске системы с помощью команды *sudo systemctl enable ssh.service*.

- Перенастроим службу SSHD на порт 2022. Для этого изменим конфигурацию файла *etc/ssh/sshd_config* и перезагрузим службу.

- Используя команду *ps aux | grep sshd* (*aux* - все процессы, *grep sshd* - вывод процессов, в которых упоминается sshd) покажем наличие процесса sshd. 

![Вывод команды ps](img/img32.jpeg)

- Перезагрузим систему с помощью команды *sudo reboot*.

- Посмотрим вывод команды *netstat -tan* и объясним его.

    ![Вывод команды netstat -tan](img/img33.jpeg)

    1. **Proto** - используемый сетевой протокол.

    2. **Recv-Q** - количество байтов в очереди на прием данных.

    3. **Send-Q** - количество байтов вочереди на отправку данных.

    4. **Local Address** - локальный IP-адрес и порт, на котором прослушиваются соединения.

    5. **Foreign Address** - IP-адрес и порт хоста, от которого принимается соединение.

    6. **State** - состояние TCP-соединения.

    7. **0.0.0.0** означает любой IP-адрес, * означает любой порт.

    8. **-t** - флаг для вывода только TCP-соединений

    9. **-a** - флаг для вывода всех соединений (не только прослушиваемых).

    10. **-n** - IP-адреса не преобразуются в имена хостов.

## Part 9. Установка и использование утилит top, htop

- Запустим утилиту top.

    ![Вывод команды top](img/img34.jpeg)

    1. **uptime**: 22min.

    2. **Количество пользователей**: 1.

    3. **Средняя загрузка**: за 5 минут 0.00, за 15 минут 0.01.

    4. **Общее количество процессов**: 138.

    5. **Загрузка CPU**: 0.0.

    6. **Загрузка памяти**: с помощью M отсортировали процессы по убыванию памяти, посчитали сумму и получили 3%.

    7. **PID процесса, который занимает больше всего памяти**: 816.

    8. **PID процесса, который занимает больше всего процессорного времени**: 1.

    ![Сортировка top по процессорному времени](img/img35.jpeg)

- Запустим утилиту htop.

    1. Отсортируем по *PID* с помощью *F6 -> PID*.

    ![Сортировка htop по PID](img/img36.jpeg)

    2. Отсортируем по *PERCENT_CPU* с помощью *F6 -> PERCENT_CPU*.

    ![Сортировка htop по PERCENT_CPU](img/img37.jpeg)

    3. Отсортируем по *PERCENT_MEM* с помощью *F6 -> PERCENT_MEM*.

    ![Сортировка htop по PERCENT_MEM](img/img38.jpeg)

    4. Отсортируем по *TIME* с помощью *F6 -> TIME*.

    ![Сортировка htop по TIME](img/img39.jpeg)

    5. Отфильтруем для процесса sshd с помощью *F4 -> sshd*.

    ![Фильтрация htop для процесса sshd](img/img40.jpeg)

    6. Найдем процесс syslog с помощью *F3 -> syslog*.

    ![Поиск процесса syslog в htop](img/img41.jpeg)

    7. Добавим *hostname*, *clock* и *uptime* с помощью *F2 -> Meters*.

    ![Добавление в вывод htop параметров hostname, clock и uptime](img/img42.jpeg)

## Part 10. Использование утилиты fdisk

- Запустим команду *fdisk -l*.

    ![Вывод команды fdisk -l](img/img43.jpeg)

    1. **Название жесткого диска**: /dev/sda.

    2. **Размер жесткого диска**: 25gb.

    3. **Количество секторов**: 52428800.

- Размер swap узнаем с помощью команды *free*. Видим значение 0.

![Вывод команды free](img/img44.jpeg)

## Part 11. Использование утилиты df

- Запустим команду df.

    ![Вывод команды df](img/img45.jpeg)

    1. **Размер корневого раздела**: 11758760kb.

    2. **Размер занятого пространства корневого раздела**: 2913740kb.

    3. **Размер свободного пространства корневого раздела**: 8225912kb.

    4. **Процент использования корневого раздела**: 27.

- Запустим команду *df -Th*(-T - отображение типа файловой системы, -h - отображение данных в человекочитаемом формате).

    ![Вывод команды df -Th](img/img46.jpeg)

    1. **Размер корневого раздела**: 12gb.

    2. **Размер занятого пространства корневого раздела**: 2.8gb.

    3. **Размер свободного пространства корневого раздела**: 7.9gb.

    4. **Процент использования корневого раздела**: 27.

    5. **Тип файловой системы**: ext4.

# Part 12. Использование утилиты du

- Запустим команду *du*.

    ![Вывод команды du](img/img47.jpeg)

    1. Выведем размер папки /home в байтах, в человекочитаемом виде.

    ![Размер папки /home](img/img48.jpeg)

    2. Выведем размер папки /var в байтах, в человекочитаемом виде.

    ![Размер папки /var](img/img49.jpeg)

    3. Выведем размер папки /var/log в байтах, в человекочитаемом виде.

    ![Размер папки /var/log](img/img50.jpeg)

    4. Выведем размер всего содержимого в var/log.

    ![Размер всего содержимого в var/log](img/img51.jpeg)

## Part 13. Установка и использование утилиты ncdu

- Установим утилиту ncdu с помощью команды *sudo apt install ncdu*.

- Выведем размер папки */home*.

![Размер папки /home в ncdu](img/img52.jpeg)

- Выведем размер папки */var*.

![Размер папки /var в ncdu](img/img53.jpeg)

- Выведем размер папки */var/log*.

![Размер папки /var/log в ncdu](img/img54.jpeg)


## Part 14. Работа с системными журналами

- Откроем файлы */var/log/auth.log*, */var/log/dmesg*, */var/log/syslog* с помощью текстового редактора *Nano*.

- В файле */var/log/auth.log* найдем время последней успешной авторизации, имя пользователя и метод входа в систему.

    ![Файл /var/log/auth.log](img/img55.jpeg)

    1. **Время последней успешной авторизации**: 23:56:20.

    2. **Имя пользователя**: murmisov.

    3. **Метод входа в систему**: tty1.

- Перезапустим службу SSHd и найдем в *auth.log* сообщение о рестарте службы.

    ![Сообщение о рестарте sshd](img/img56.jpeg)

## Part 15. Использование планировщика заданий CRON

- Запустим команду *uptime* через каждые 2 минуты. Для этого откроем планировщик для редактирования с помощью *crontab -e* и добавим задачу */2 * * * * uptime.

- Найдем в системных журналах строчки о выполнении задачи.

![Строчки о выполнении задачи](img/img57.jpeg)

- Выведем на экран список текущих заданий для CRON.

![Текущий список заданий CRON](img/img58.jpeg)

- Удалим все задания из планировщика с помощью команды *crontab -r*.

- Выведем на экран список текущих заданий для CRON.

![Текущий список заданий CRON](img/img59.jpeg)




    

    




